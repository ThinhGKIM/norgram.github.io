function HomeStoryModule(data,startRatio){function onScroll(){var scroll=Assets.SCROLL_CONTROLLER.currentScroll.y,offset=scroll,width=_width,ratio=offset/width;_instance.setToRatio(ratio)}function addStories(){var stories=ContentManager.getChildrenByAttr(data,"name","story"),modelId=getLongestStoryId(stories),model=new TextAreaModel;model.maxFontSize=20,_numOfStories=stories.length;for(var i=0;_numOfStories>i;i++){var story=new HomeStory(stories[i],_numOfStories-i,model);story.onStoryClick=onStoryClick,modelId==i&&story.setBodyModelController(),_stories.push(story),_instance.appendChild(story),story.init()}}function onStoryClick(storyNumber){null!=_instance.onStoryClick&&_instance.onStoryClick(_numOfStories-storyNumber+1)}function getLongestStoryId(stories){for(var highestCount=0,highsetId=-1,l=stories.length,i=0;l>i;i++){var bodyHtml=ContentManager.getChildByAttr(stories[i],"name","body").innerHTML;bodyHtml.length>highestCount&&(highestCount=bodyHtml.length,highsetId=i)}return highsetId}var _instance=Snail.extend(new Module);_instance.style.backgroundColor=UIColors.WHITE,_instance.onStoryClick;var _width,_height,_ratio=0,_numOfStories=0,_storyExpandedW=0,_stories=[];return _instance.init=function(){_instance.super.init(),addStories(),Assets.SCROLL_CONTROLLER.addEventListener(ScrollController.ON_SCROLL_MOVE,onScroll)},_instance.resize_desktop=function(width,height){_storyExpandedW=width*startRatio;var storyCollapsedW=.2*width;_width=_storyExpandedW*_numOfStories,_height=height,_instance.style.width=_instance.getWidth()+"px",_instance.style.height=_height+"px";for(var xPos=0,i=0;_numOfStories>i;i++){var story=_stories[i];story.setExpandedWidth(_storyExpandedW),story.setCollapsedWidth(storyCollapsedW),story.setHeight(_height),story.setRatioOffset(i),story.setRatio(_ratio,!0),TweenMax.set(story,{x:xPos}),xPos+=story.getWidth()}},_instance.getExpandedStoryWidth=function(){return _storyExpandedW},_instance.getWidth=function(){return _width},_instance.getNumOfStories=function(){return _numOfStories},_instance.kill=function(){Assets.SCROLL_CONTROLLER.removeEventListener(ScrollController.ON_SCROLL_MOVE,onScroll)},_instance.setToRatio=function(ratio){for(var xPos=0,i=0;_numOfStories>i;i++){var story=_stories[i];story.setRatio(ratio*_numOfStories),TweenMax.set(story,{x:xPos}),xPos+=story.getWidth()}},_instance}